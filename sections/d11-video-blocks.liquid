{{ 'ss-media-v1.css' | asset_url | stylesheet_tag }}
<script src="{{ 'ss-media-v1.js' | asset_url }}" defer="defer"></script>
<div id="shopify-section-d11__video-block" class="shopify-section">
  <style>
                        .section-d11__video-block {
                          margin: 40px 0;
                          padding: 0 40px;
                          background-color: {{ section.settings.sec_bg_color }};
                        }

                        .section-d11__video-block-settings {
                          max-width: 1440px;
                          margin: 0 auto;
                        }

                        .video-social-heading-d11__video-block h2 {
                          color: #1B1B1B;
                          font-family: "Tenor Sans";
                          font-size: 32px;
                          font-weight: 400;
                          text-align: center;
                          margin: 0;
                        }

                        .video-social-subheading-d11__video-block p {
                          color: #1B1B1B;
                          font-family: Roboto;
                          font-size: 14px;
                          font-weight: 300;
                          line-height: 20px;
                          text-align: center;
                          margin: 12px 0 0;
                        }

                        .video-social-slider-d11__video-block {
                          margin-top: 40px;
                        }

                        .remove-swiper-wrapper {
                          display: flex;
                          gap: 20px;
                          scroll-behavior: smooth;
                        }

                        .video-social-card-d11__video-block {
                          flex: 0 0 calc(25% - 15px);
                          background: transparent;
                          border-radius: 8px;
                          height: 550px;
                        }

                        .video-social-video-d11__video-block {
                          position: relative;
                          border-radius: 0;
                          border: none;
                          height: 100%;
                        }

                        .video-social-video-d11__video-block video {
                          width: 100%;
                          height: 100%;
                          object-fit: cover;
                          border-radius: 8px;
                        }

                        .d11__video-auth-wrap {
                          position: absolute;
                          bottom: 10%;
                          left: 33%;
                          z-index: 1;
                          text-align: center;
                        }

                        .video_auth-name {
                          color: #FFF;
                          font-family: Poppins;
                          font-size: 16px;
                          font-weight: 400;
                          margin: 0;
                        }

                        .video_auth-desig {
                          color: #C7C7C7;
                          font-family: Poppins;
                          font-size: 14px;
                          font-weight: 400;
                          margin: 0;
                        }

                        .proscroll-video-bar__d11 {
                          height: 3px;
                          width: 100%;
                          background-color: #EDEDED;
                          margin-top: 10px;
                        }

                        .proscroll-video-bar__d11::-webkit-progress-value {
                          background-color: #2D1B38;
                        }
                        .muted-btn-d6 {
                        width: 16px;
                        height: 16px;
                        position: absolute;
                        top: 20px;
                        right: 20px;
                        cursor: pointer;
                    }
                        .muted-btn-d6 img{
                          width: 100%;
                          height: 100%;
                          object-fit: cover;
                        }
            img.play-icon-d6,
            img.pause-icon-d6{
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .play-pause-btn-d6 {
        width: 60px;
        height: 60px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

                        @media (max-width: 798px) {
                          .remove-swiper-wrapper{
                            overflow-x: scroll;
                            scroll-snap-type: x mandatory;
                            gap: 4px;
                          }
                          .video-social-card-d11__video-block {
                            flex: 0 0 74%;
                            max-width: 320px;
                            scroll-snap-align: center;
                            height: 430px;
                          }

                          .d11__video-auth-wrap {
                            left: 28%;
                          }
                          .section-d11__video-block{
                            padding: 0 0px;
                          }
                          .proscroll-video-bar__d5{
                            display: block;
                            background: #2D1B38;
                            height: 2px;
                            margin-top: 16px;
                          }
                          .main-scroll-bar-d5 {
                    padding: 0 20px;
                }
              .video-social-card-d11__video-block:first-child {
                margin: 0 0 0 20px;
            }
              .video-social-card-d11__video-block:last-child {
                margin: 0 20px 0 0;
            }
                        }
  </style>

  <div class="section-d11__video-block">
    <div class="section-d11__video-block-settings">
      <div class="video-social-heading-d11__video-block">
        <h2>{{ section.settings.title }}</h2>
      </div>

      <div class="video-social-subheading-d11__video-block">
        <p>{{ section.settings.sub_heading }}</p>
      </div>

      <div class="video-social-slider-d11__video-block">
        <div class="remove-swiper-wrapper">
          {% for block in section.blocks %}
            <div class="video-social-card-d11__video-block">
              <div class="video-social-video-d11__video-block">
                {% render 'ss-media-v1',
                  video: block.settings.video,
                  controls: block.settings.controls,
                  loop: block.settings.loop,
                  autoplay: block.settings.autoplay,
                  muted: block.settings.muted,
                  poster_image: block.settings.image,
                  object_fit: 'cover'
                %}
                <div class="d11__video-auth-wrap">
                  <p class="video_auth-name">{{ block.settings.auth }}</p>
                  <p class="video_auth-desig">{{ block.settings.desig }}</p>
                </div>

                <!-- Play/Pause and Mute/Unmute Buttons -->
                <div class="video-controls-d6">
                  <div class="play-pause-btn-d6">
                    <img
                      class="play-icon-d6"
                      src="https://cdn.shopify.com/s/files/1/0900/0199/8097/files/Play_button.png?v=1741988553"
                    >
                    <img
                      class="pause-icon-d6"
                      src="https://cdn.shopify.com/s/files/1/0900/0199/8097/files/pause.svg?v=1741988976"
                      style="display: none;"
                    >
                  </div>

                  <div class="muted-btn-d6">
                    <img
                      class="unmuted-icon-d6"
                      src="https://cdn.shopify.com/s/files/1/0900/0199/8097/files/Frame_1000003926.png?v=1741984932"
                    >
                    <img
                      class="muted-icon-d6"
                      src="https://cdn.shopify.com/s/files/1/0900/0199/8097/files/volume.png?v=1741985989"
                      style="display: none;"
                    >
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      <div class="main-scroll-bar-d5">
        <div class="proscroll-video-bar__d5"></div>
      </div>
    </div>
  </div>
</div>

<script>
     document.addEventListener("DOMContentLoaded", function () {
      const progressBarD5 = document.querySelector(".proscroll-video-bar__d5");
      const sectionD5 = document.querySelector(".remove-swiper-wrapper");

      function updateProgressBar() {
          let visibleWidth = sectionD5.clientWidth;
          let totalWidth = sectionD5.scrollWidth;
          let initialWidth = (visibleWidth / totalWidth) * 100;

          let scrollPositionD5 = sectionD5.scrollLeft;
          let maxScrollD5 = totalWidth - visibleWidth;
          let scrollPercentageD5 = (scrollPositionD5 / maxScrollD5) * (100 - initialWidth) + initialWidth;

          progressBarD5.style.width = scrollPercentageD5 + "%";
      }

      function setInitialProgressBar() {
          let visibleWidth = sectionD5.clientWidth;
          let totalWidth = sectionD5.scrollWidth;
          let initialWidth = (visibleWidth / totalWidth) * 100;
          progressBarD5.style.width = initialWidth + "%";
      }

      setInitialProgressBar();
      sectionD5.addEventListener("scroll", updateProgressBar);
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".video-social-video-d11__video-block").forEach(videoContainer => {
      let video = videoContainer.querySelector("video");

      // Mute/Unmute buttons
      let muteButton = videoContainer.querySelector(".muted-btn-d6");
      let unmutedIcon = muteButton.querySelector(".unmuted-icon-d6");
      let mutedIcon = muteButton.querySelector(".muted-icon-d6");

      // Play/Pause buttons
      let playButton = videoContainer.querySelector(".play-pause-btn-d6");
      let playIcon = playButton.querySelector(".play-icon-d6");
      let pauseIcon = playButton.querySelector(".pause-icon-d6");

      // Set initial states
      if (video.muted) {
        unmutedIcon.style.display = "block";
        mutedIcon.style.display = "none";
      } else {
        unmutedIcon.style.display = "none";
        mutedIcon.style.display = "block";
      }

      if (video.paused) {
        playIcon.style.display = "block";
        pauseIcon.style.display = "none";
      } else {
        playIcon.style.display = "none";
        pauseIcon.style.display = "block";
      }

      // Mute/Unmute toggle
      muteButton.addEventListener("click", function () {
        if (video.muted) {
          video.muted = false;
          unmutedIcon.style.display = "none";
          mutedIcon.style.display = "block";
        } else {
          video.muted = true;
          unmutedIcon.style.display = "block";
          mutedIcon.style.display = "none";
        }
      });

      // Play/Pause toggle
      playButton.addEventListener("click", function () {
        if (video.paused) {
          video.play();
          playIcon.style.display = "none";
          pauseIcon.style.display = "block";
        } else {
          video.pause();
          playIcon.style.display = "block";
          pauseIcon.style.display = "none";
        }
      });
    });
  });
</script>
{% schema %}
{
  "name": "Social Video Grid",
  "settings": [
    {
      "type": "color",
      "id": "sec_bg_color",
      "label": "Section BG Color",
      "default": "#F2F1EA"
    },
    {
  "type": "header",
  "content": "Title",
  "info": "Title Settings"
    },
    {
      "type": "textarea",
      "id": "title",
      "label": "Title",
      "default": "Real Customers, Real Stories"
    },
     {
      "type": "text",
      "id": "sub_heading",
      "label": "Subheading",
      "default": "Thousand of Ring Enthusiasts' Preferred Ring.com"
    },
     {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "unit": "px",
      "step": 1,
      "min": 14,
      "max": 50,
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "unit": "px",
      "step": 1,
      "min": 14,
      "max": 50,
      "default": 36
    },
  ],
     "blocks" : [
    {
      "name":"Video",
        "type":"text",
        "settings":[
          {
        "type": "video",
        "id": "video",
        "label": "Video"
      },
      {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay video",
        "default": true,
        "info": "Autoplay will only work if the video is muted"
      },
      {
        "type": "checkbox",
        "id": "controls",
        "label": "Show video controls",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "muted",
        "label": "Mute video",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "video_loop",
        "label": "Play in loop",
        "default": true
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Video poster image",
        "info": "Fallback video poster image will be visible until some frames of video get downloaded"
      },
          {
            "type": "text",
            "id": "auth",
            "label": "Author Name",
            "default": "Amelia Thompson"
          },
          {
            "type": "text",
            "id": "desig",
            "label": "Designation",
            "default": "Brand Consultant"
          }
        ]
      }
   ],
  "presets": [
    {
      "name": "Social Video Grid"
    }
  ]
}
{% endschema %}
